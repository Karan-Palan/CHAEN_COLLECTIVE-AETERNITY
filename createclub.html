<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="Create a new investment club on CHÆN COLLECTIVE - Start your NFT investment journey today">
    <meta name="author" content="CHÆN COLLECTIVE">
    <meta name="keywords" content="create club, NFT, investment, blockchain, CHÆN, DAO">

    <title>Create Club | CHÆN COLLECTIVE</title>

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    
    <!-- Font Awesome -->
    <link href="vendor/fontawesome-free/css/all.min.css" rel="stylesheet" type="text/css">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700;800&display=swap" rel="stylesheet">

    <!-- Core CSS -->
    <link href="css/sb-admin-2.min.css" rel="stylesheet">
    
    <!-- Modern Theme -->
    <link href="css/modern-theme.css" rel="stylesheet">
    
    <!-- Custom styles for create club page -->
    <style>
        .create-club-container {
            padding: 2rem 0;
        }
        
        .form-section {
            background: var(--card-bg);
            border-radius: 1rem;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.1);
        }
        
        .form-section h2 {
            color: var(--primary);
            margin-bottom: 1.5rem;
            font-weight: 700;
            font-size: 1.5rem;
        }
        
        .form-label {
            font-weight: 600;
            color: var(--text);
            margin-bottom: 0.5rem;
            display: block;
        }
        
        .form-control, .form-select {
            background-color: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text);
            padding: 0.75rem 1rem;
            border-radius: 8px;
            margin-bottom: 1.25rem;
            transition: all 0.3s ease;
        }
        
        .form-control:focus, .form-select:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 0.2rem rgba(108, 99, 255, 0.25);
            background-color: rgba(255, 255, 255, 0.08);
        }
        
        .form-text {
            color: var(--text-muted);
            font-size: 0.875rem;
            margin-top: -0.75rem;
            margin-bottom: 1rem;
        }
        
        .btn-create {
            background: var(--primary);
            border: none;
            padding: 0.75rem 2rem;
            font-weight: 600;
            letter-spacing: 0.5px;
            text-transform: uppercase;
            transition: all 0.3s ease;
            border-radius: 8px;
            color: white;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }
        
        .btn-create:hover {
            background: var(--primary-dark);
            transform: translateY(-2px);
            color: white;
        }
        
        .btn-create i {
            margin-right: 0.5rem;
        }
        
        .card-stats {
            background: var(--card-bg);
            border-radius: 1rem;
            padding: 1.5rem;
            height: 100%;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .card-stats:hover {
            transform: translateY(-5px);
            box-shadow: 0 0.5rem 1.5rem rgba(0, 0, 0, 0.2);
        }
        
        .card-stats .card-icon {
            width: 3.5rem;
            height: 3.5rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 1rem;
            background: rgba(108, 99, 255, 0.1);
            color: var(--primary);
            font-size: 1.5rem;
        }
        
        .card-stats .card-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-muted);
            margin-bottom: 0.5rem;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .card-stats .card-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text);
            margin-bottom: 0.5rem;
        }
        
        .card-stats .card-actions {
            margin-top: 1rem;
        }
        
        .alert {
            border-radius: 8px;
            margin-bottom: 1.5rem;
            padding: 1rem;
        }
        
        .alert-info {
            background-color: rgba(23, 162, 184, 0.1);
            border: 1px solid rgba(23, 162, 184, 0.3);
            color: #17a2b8;
        }
        
        .alert-warning {
            background-color: rgba(255, 193, 7, 0.1);
            border: 1px solid rgba(255, 193, 7, 0.3);
            color: #ffc107;
        }
        
        .token-preview {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 8px;
            padding: 1.5rem;
            margin-top: 1.5rem;
            border: 1px dashed rgba(255, 255, 255, 0.1);
        }
        
        .token-preview h4 {
            color: var(--primary);
            margin-bottom: 1rem;
            font-size: 1.1rem;
        }
        
        .token-preview p {
            margin-bottom: 0.5rem;
            display: flex;
            justify-content: space-between;
        }
        
        .token-preview p span:first-child {
            color: var(--text-muted);
            font-weight: 500;
        }
        
        .token-preview p span:last-child {
            color: var(--text);
            font-weight: 600;
        }
    </style>
</head>

<body id="page-top" class="bg-dark">
    <!-- Page Wrapper -->
    <div id="wrapper">
        <!-- Sidebar -->
        <ul class="navbar-nav sidebar sidebar-dark accordion" id="accordionSidebar">
            <!-- Sidebar - Brand -->
            <a class="sidebar-brand d-flex align-items-center justify-content-center" href="index.html">
                <div class="sidebar-brand-text mx-3">CHÆN COLLECTIVE</div>
            </a>

            <!-- Divider -->
            <hr class="sidebar-divider my-0">

            <!-- Nav Items -->
            <li class="nav-item">
                <a class="nav-link" href="index.html">
                    <i class="fas fa-fw fa-tachometer-alt"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="joinclub.html">
                    <i class="fas fa-fw fa-users"></i>
                    <span>Available Clubs</span>
                </a>
            </li>
            <li class="nav-item active">
                <a class="nav-link" href="createclub.html">
                    <i class="fas fa-fw fa-plus-circle"></i>
                    <span>Create Club</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="proposal.html">
                    <i class="fas fa-fw fa-file-alt"></i>
                    <span>Proposals</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="members.html">
                    <i class="fas fa-fw fa-user-friends"></i>
                    <span>Members</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="club.html">
                    <i class="fas fa-fw fa-home"></i>
                    <span>My Club</span>
                </a>
            </li>

            <!-- Divider -->
            <hr class="sidebar-divider d-none d-md-block">

            <!-- Sidebar Toggler (Sidebar) -->
            <div class="text-center d-none d-md-inline">
                <button class="rounded-circle border-0" id="sidebarToggle"></button>
            </div>
        </ul>
        <!-- End of Sidebar -->

        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">
            <!-- Main Content -->
            <div id="content">
                <!-- Topbar -->
                <nav class="navbar navbar-expand navbar-light topbar mb-4 static-top shadow">
                    <!-- Sidebar Toggle (Topbar) -->
                    <button id="sidebarToggleTop" class="btn btn-link d-md-none rounded-circle mr-3">
                        <i class="fa fa-bars"></i>
                    </button>

                    <!-- Topbar Navbar -->
                    <ul class="navbar-nav ml-auto">
                        <!-- Nav Item - User Information -->
                        <li class="nav-item dropdown no-arrow">
                            <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button"
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="mr-2 d-none d-lg-inline text-gray-300">My Account</span>
                                <img class="img-profile rounded-circle" src="img/undraw_profile.svg">
                            </a>
                            <!-- Dropdown - User Information -->
                            <div class="dropdown-menu dropdown-menu-right shadow animated--grow-in"
                                aria-labelledby="userDropdown">
                                <a class="dropdown-item" href="#" data-toggle="modal" data-target="#logoutModal">
                                    <i class="fas fa-sign-out-alt fa-sm fa-fw mr-2 text-gray-400"></i>
                                    Logout
                                </a>
                            </div>
                        </li>
                    </ul>
                </nav>
                <!-- End of Topbar -->

                <!-- Begin Page Content -->
                <div class="container-fluid create-club-container">
                    <!-- Page Heading -->
                    <div class="d-sm-flex align-items-center justify-content-between mb-4">
                        <h1 class="h3 mb-0 text-gray-100">Create a New Investment Club</h1>
                    </div>

                    <!-- Content Row -->
                    <div class="row mb-4">
                        <!-- Balance Card -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card-stats">
                                <div class="card-icon">
                                    <i class="fas fa-wallet"></i>
                                </div>
                                <div class="card-title">Your Balance</div>
                                <div class="card-value view_balance_address">-</div>
                                <div class="card-actions">
                                    <a href="#" class="btn btn-sm btn-primary">Add Funds</a>
                                </div>
                            </div>
                        </div>

                        <!-- Quick Actions -->
                        <div class="col-xl-3 col-md-6 mb-4">
                            <div class="card-stats">
                                <div class="card-icon">
                                    <i class="fas fa-tachometer-alt"></i>
                                </div>
                                <div class="card-title">Quick Actions</div>
                                <div class="card-actions">
                                    <a href="index.html" class="btn btn-sm btn-outline-primary mr-2">
                                        <i class="fas fa-tachometer-alt mr-1"></i> Dashboard
                                    </a>
                                    <a href="joinclub.html" class="btn btn-sm btn-outline-secondary">
                                        <i class="fas fa-users mr-1"></i> Browse Clubs
                                    </a>
                                </div>
                            </div>
                        </div>

                        <!-- Help Card -->
                        <div class="col-xl-6 mb-4">
                            <div class="alert alert-info">
                                <h4><i class="fas fa-info-circle mr-2"></i>Creating a New Club</h4>
                                <p class="mb-0">Start your own investment club to pool funds with other members and invest in NFTs and other digital assets. You'll need at least 5 AE to create a new club.</p>
                            </div>
                        </div>
                                        <div class="col-auto">
                                            <i class="fas fa-clipboard-list fa-2x text-gray-300"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Create Club Form -->
                    <div class="row">
                        <div class="col-xl-8 col-lg-10 mx-auto">
                            <div class="form-section">
                                <h2><i class="fas fa-plus-circle mr-2"></i>Club Information</h2>
                                
                                <div class="mb-4">
                                    <label for="club_name" class="form-label">Club Name</label>
                                    <input type="text" class="form-control form-control-lg" id="club_name" 
                                           placeholder="e.g. Web3 Investors Club" required>
                                    <div class="form-text">Choose a unique and descriptive name for your investment club.</div>
                                </div>

                                <div class="row">
                                    <div class="col-md-6 mb-4">
                                        <label for="club_symbol" class="form-label">Club Token Symbol</label>
                                        <input type="text" class="form-control" id="club_symbol" 
                                               placeholder="e.g. W3IC" maxlength="8" required>
                                        <div class="form-text">3-8 character ticker symbol for your club's token</div>
                                    </div>
                                    <div class="col-md-6 mb-4">
                                        <label for="club_supply" class="form-label">Initial Token Supply</label>
                                        <div class="input-group">
                                            <input type="number" class="form-control" id="club_supply" 
                                                   value="1000000" min="1000" step="1000" required>
                                            <span class="input-group-text">tokens</span>
                                        </div>
                                        <div class="form-text">Total supply of governance tokens to be minted</div>
                                    </div>
                                </div>

                                <div class="mb-4">
                                    <label for="club_description" class="form-label">Club Description</label>
                                    <textarea class="form-control" id="club_description" rows="3" 
                                              placeholder="Describe your club's purpose, investment strategy, and goals"></textarea>
                                </div>

                                <div class="alert alert-warning">
                                    <h5><i class="fas fa-lock mr-2"></i>Security</h5>
                                    <div class="mb-3">
                                        <label for="trx_password" class="form-label">Your Wallet Password</label>
                                        <input type="password" class="form-control" id="trx_password" 
                                               placeholder="Enter your wallet password" required>
                                        <div class="form-text">Required to sign the transaction</div>
                                    </div>
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="terms_agreement" required>
                                        <label class="form-check-label" for="terms_agreement">
                                            I understand that creating a club requires a one-time fee of 5 AE and I have read and agree to the 
                                            <a href="#" class="text-primary">Terms of Service</a> and <a href="#" class="text-primary">Privacy Policy</a>.
                                        </label>
                                    </div>
                                </div>

                                <!-- Token Preview -->
                                <div class="token-preview">
                                    <h4><i class="fas fa-coins mr-2"></i>Token Preview</h4>
                                    <p>
                                        <span>Token Name:</span>
                                        <span id="token_preview_name">-</span>
                                    </p>
                                    <p>
                                        <span>Token Symbol:</span>
                                        <span id="token_preview_symbol">-</span>
                                    </p>
                                    <p>
                                        <span>Total Supply:</span>
                                        <span id="token_preview_supply">-</span>
                                    </p>
                                    <p>
                                        <span>Creation Fee:</span>
                                        <span>5 AE</span>
                                    </p>
                                </div>

                                <div class="d-flex justify-content-between align-items-center mt-4">
                                    <a href="joinclub.html" class="btn btn-outline-secondary">
                                        <i class="fas fa-arrow-left mr-2"></i>Back to Clubs
                                    </a>
                                    <button type="button" id="createClubButton" class="btn btn-primary btn-lg px-5">
                                        <i class="fas fa-plus-circle mr-2"></i>Create Club
                                        <span class="spinner-border spinner-border-sm ms-2 d-none" role="status" id="createSpinner"></span>
                                    </button>
                                </div>

                                <!-- Status Messages -->
                                <div class="mt-4">
                                    <div class="alert alert-success d-none" id="successCreateClub">
                                        <i class="fas fa-check-circle me-2"></i>
                                        <span>Club created successfully! Redirecting to your club dashboard...</span>
                                    </div>
                                    <div class="alert alert-danger d-none" id="errorCreateClub">
                                        <i class="fas fa-exclamation-circle me-2"></i>
                                        <span id="errorMessage">An error occurred while creating the club. Please try again.</span>
                                    </div>
                                    <div class="alert alert-info d-none" id="loadingMessage">
                                        <div class="d-flex align-items-center">
                                            <div class="spinner-border spinner-border-sm me-2" role="status">
                                                <span class="visually-hidden">Loading...</span>
                                            </div>
                                            <span id="loadingMessageText">Creating your club on the blockchain. This may take a moment...</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>
                <!-- /.container-fluid -->

            </div>
            <!-- End of Main Content -->

            <!-- Footer -->
            <footer class="sticky-footer" style="background-color: #0b0b0f; color: #FFFFFF;">
               
            </footer>
            <!-- End of Footer -->

        </div>
        <!-- End of Content Wrapper -->

    </div>
    <!-- End of Page Wrapper -->

    <!-- Scroll to Top Button-->
    <a class="scroll-to-top rounded" href="#page-top">
        <i class="fas fa-angle-up"></i>
    </a>

    <!-- Logout Modal-->
    <div class="modal fade" id="seeAccountModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div style="background-color: #0b0b0f;">
                    <h5 class="modal-title" id="exampleModalLabel">Account</h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div style="background-color: #0b0b0f;">
                    Address: <br /> <div class="current_account"></div>
                    <br />
                    <span style="font-size: x-small;" class="current_account_text"></span>
                </div>
                <div class="modal-footer">
                    
                </div>
            </div>
        </div>
    </div>


    <!-- Logout Modal-->
    <div class="modal fade" id="logoutModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel"
        aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div style="background-color: #0b0b0f;">
                    <h5 class="modal-title" id="exampleModalLabel">Ready to Leave?</h5>
                    <button class="close" type="button" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">×</span>
                    </button>
                </div>
                <div style="background-color: #0b0b0f;">Select "Logout" below if you are ready to end your current session in this browser.</div>
                <div class="modal-footer">
                    <button class="btn btn-secondary" type="button" data-dismiss="modal">Cancel</button>
                    <a class="btn btn-primary" id="btnLogout">Logout</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap core JavaScript-->
    <script src="vendor/jquery/jquery.min.js"></script>
    <script src="vendor/bootstrap/js/bootstrap.bundle.min.js"></script>

    <!-- Core plugin JavaScript-->
    <script src="vendor/jquery-easing/jquery.easing.min.js"></script>

    <!-- Custom scripts for all pages-->
    <script src="js/sb-admin-2.min.js"></script>



        <script src="js/jquery.qrcode.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/crypto-js/3.1.2/rollups/aes.js"></script>
        <script src="https://unpkg.com/@aeternity/aepp-sdk/dist/aepp-sdk.browser-script.js"></script>
        <script src="js/constants.js"></script>
    <script src="js/main.js"></script>
    <script type="text/javascript">
        // Check authentication and initialize the page
        document.addEventListener('DOMContentLoaded', function() {
            const isAuthenticated = localStorage.getItem('aeWalletAddress');
            if (!isAuthenticated) {
                window.location.href = 'login.html';
                return;
            }

            // Initialize balance check
            checkBalance();

            // Update token preview on input changes
            document.getElementById('club_name').addEventListener('input', updateTokenPreview);
            document.getElementById('club_symbol').addEventListener('input', updateTokenPreview);
            document.getElementById('club_supply').addEventListener('input', updateTokenPreview);

            // Handle form submission
            document.getElementById('createClubButton').addEventListener('click', handleClubCreation);
        });

        // Update the token preview based on form inputs
        function updateTokenPreview() {
            const name = document.getElementById('club_name').value || 'Your Club';
            const symbol = document.getElementById('club_symbol').value || 'CLUB';
            const supply = document.getElementById('club_supply').value || '0';
            
            document.getElementById('token_preview_name').textContent = name + ' Token';
            document.getElementById('token_preview_symbol').textContent = symbol;
            document.getElementById('token_preview_supply').textContent = Number(supply).toLocaleString() + ' ' + symbol;
        }

        // Handle club creation
        async function handleClubCreation() {
            const button = document.getElementById('createClubButton');
            const spinner = document.getElementById('createSpinner');
            const loadingMessage = document.getElementById('loadingMessage');
            const errorMessage = document.getElementById('errorCreateClub');
            const successMessage = document.getElementById('successCreateClub');
            
            // Reset messages
            errorMessage.classList.add('d-none');
            successMessage.classList.add('d-none');
            loadingMessage.classList.remove('d-none');
            
            // Disable button and show spinner
            button.disabled = true;
            spinner.classList.remove('d-none');
            
            try {
                // Get form values
                const name = document.getElementById('club_name').value.trim();
                const symbol = document.getElementById('club_symbol').value.trim().toUpperCase();
                const supply = document.getElementById('club_supply').value;
                const password = document.getElementById('trx_password').value;
                
                // Basic validation
                if (!name || !symbol || !supply || !password) {
                    throw new Error('Please fill in all required fields');
                }
                
                if (symbol.length < 3 || symbol.length > 8) {
                    throw new Error('Token symbol must be 3-8 characters long');
                }
                
                if (parseInt(supply) < 1000) {
                    throw new Error('Minimum token supply is 1,000');
                }
                
                // Here you would typically call your blockchain interaction function
                // For example: await createClub(name, symbol, supply, password);
                
                // Simulate API call
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // Show success message
                loadingMessage.classList.add('d-none');
                successMessage.classList.remove('d-none');
                
                // Redirect after a short delay
                setTimeout(() => {
                    window.location.href = 'club.html';
                }, 2000);
                
            } catch (error) {
                console.error('Error creating club:', error);
                document.getElementById('errorMessage').textContent = error.message || 'An error occurred while creating the club';
                errorMessage.classList.remove('d-none');
                loadingMessage.classList.add('d-none');
            } finally {
                button.disabled = false;
                spinner.classList.add('d-none');
            }
        }
    </script>
</body>

</html>